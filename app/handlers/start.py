from aiogram import Router
from aiogram.filters import CommandStart
from aiogram.types import KeyboardButton, ReplyKeyboardMarkup, Message

from app.db import get_or_create_user

router = Router()


@router.message(CommandStart())
async def cmd_start(message: Message):
    await get_or_create_user(message.from_user.id)

    # –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é (–æ–±—ã—á–Ω—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑—É)
    kb = [
        [
            KeyboardButton(text="üèÅ –°–ª–µ–¥—É—é—â–∞—è –≥–æ–Ω–∫–∞"),
            KeyboardButton(text="üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å"),
        ],
        [
            KeyboardButton(text="üèÜ –ö—É–±–æ–∫ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤"),
            KeyboardButton(text="üèé –õ–∏—á–Ω—ã–π –∑–∞—á–µ—Ç"),
            KeyboardButton(text="‚öîÔ∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ"),
        ],
        [
            KeyboardButton(text="‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ"),
            KeyboardButton(text="‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"),
            KeyboardButton(text="üì© –°–≤—è–∑—å —Å –∞–¥–º–∏–Ω–æ–º")
        ],
    ]

    keyboard = ReplyKeyboardMarkup(
        keyboard=kb,
        resize_keyboard=True,
        input_field_placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç –º–µ–Ω—é"
    )

    welcome_text = (
        "üèé **–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ FormulaOne Hub!**\n\n"
        "–Ø —Ç–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–∞–¥–¥–æ–∫ –≤ Telegram. –ó–¥–µ—Å—å –µ—Å—Ç—å –≤—Å—ë –¥–ª—è —Ñ–∞–Ω–∞—Ç–∞ F1:\n\n"
        "üèÅ **–ö–∞–ª–µ–Ω–¥–∞—Ä—å –∏ –ì–æ–Ω–∫–∏**\n"
        "–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —ç—Ç–∞–ø–æ–≤, –≤—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞ –∏ –æ–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á–µ—Ç –¥–æ –∑–µ–ª–µ–Ω—ã—Ö –æ–≥–Ω–µ–π.\n\n"
        "üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**\n"
        "–ê–∫—Ç—É–∞–ª—å–Ω—ã–π –õ–∏—á–Ω—ã–π –∑–∞—á–µ—Ç –∏ –ö—É–±–æ–∫ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤.\n\n"
        "‚öîÔ∏è **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–∏–ª–æ—Ç–æ–≤**\n"
        "–°—Ç—Ä–æ–∏–º –∫—Ä–∞—Å–∏–≤—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ—Ç–∏–≤–æ—Å—Ç–æ—è–Ω–∏—è –ª—é–±—ã—Ö –≥–æ–Ω—â–∏–∫–æ–≤ –ø–æ –æ—á–∫–∞–º.\n\n"
        "‚≠ê **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ –∏ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**\n"
        "–ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –ª—é–±–∏–º—ã—Ö –ø–∏–ª–æ—Ç–æ–≤, –∏ —è –ø—Ä–∏—à–ª—é –∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ —Ñ–∏–Ω–∏—à–∞. "
        "–ù–∞—Å—Ç—Ä–æ–π –≤—Ä–µ–º—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –≥–æ–Ω–∫–æ–π (–∑–∞ 10 –º–∏–Ω, –∑–∞ —á–∞—Å –∏–ª–∏ –∑–∞ —Å—É—Ç–∫–∏)!\n\n"
        "üëá **–ñ–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é –Ω–∏–∂–µ!**"
    )

    await message.answer(
        welcome_text,
        reply_markup=keyboard,
        parse_mode="Markdown"
    )